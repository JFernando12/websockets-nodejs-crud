{"{\"assumptions\":{},\"sourceRoot\":\"/home/jfernando/personalProjects/websockets-nodejs-crud/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/jfernando/personalProjects/websockets-nodejs-crud\",\"filename\":\"/home/jfernando/personalProjects/websockets-nodejs-crud/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/jfernando/personalProjects/websockets-nodejs-crud\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"regenerator-transform\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.9:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _http = _interopRequireWildcard(require(\"http\"));\n\nvar _socket = require(\"socket.io\");\n\nvar _uuid = require(\"uuid\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar path = require(\"path\");\n\nvar notes = [];\nvar app = (0, _express[\"default\"])();\n\nvar server = _http[\"default\"].createServer(app); //Creamos un servidor y le pasamos las propiedades de la app de express.\n\n\nvar io = new _socket.Server(server); //Creamos nuestro websocket y le pasamos el servidor inicializado.\n\napp.set(\"port\", 3000);\napp.use(_express[\"default\"][\"static\"](path.resolve(__dirname, \"public\")));\nio.on(\"connection\", function (socket) {\n  console.log(\"New Connection\", socket.id);\n  io.emit(\"server:loadNotes\", notes); //Envío las notas ya guardadas para que se muestren en pantalla.\n\n  socket.on(\"client:newnote\", function (newNote) {\n    var note = _objectSpread(_objectSpread({}, newNote), {}, {\n      id: (0, _uuid.v4)()\n    }); //..newNorte significa que quiero todos los datos dentro del array\n\n\n    notes.push(note);\n    io.emit(\"server:newnote\", note);\n  });\n  socket.on(\"client:deleteNote\", function (id) {\n    notes = notes.filter(function (note) {\n      return note.id != id;\n    });\n    io.emit(\"server:loadNotes\", notes);\n  });\n  socket.on(\"client:updateNote\", function (id) {\n    var note = notes.find(function (note) {\n      return note.id == id;\n    });\n    socket.emit(\"server:updateNote\", note);\n  });\n  socket.on(\"client:changeNote\", function (updateNote) {\n    notes = notes.map(function (note) {\n      if (note.id === updateNote.id) {\n        note.title = updateNote.title;\n        note.description = updateNote.description;\n      }\n\n      return note;\n    });\n    io.emit(\"server:loadNotes\", notes);\n  });\n});\nserver.listen(app.get(\"port\"), function () {\n  console.log(\"Server on port: \", app.get(\"port\"));\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInBhdGgiLCJyZXF1aXJlIiwibm90ZXMiLCJhcHAiLCJzZXJ2ZXIiLCJodHRwIiwiY3JlYXRlU2VydmVyIiwiaW8iLCJXZWJTb2NrZXRTZXJ2ZXIiLCJzZXQiLCJ1c2UiLCJleHByZXNzIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsIm9uIiwic29ja2V0IiwiY29uc29sZSIsImxvZyIsImlkIiwiZW1pdCIsIm5ld05vdGUiLCJub3RlIiwicHVzaCIsImZpbHRlciIsImZpbmQiLCJ1cGRhdGVOb3RlIiwibWFwIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImxpc3RlbiIsImdldCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztBQUNBOztBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7OztBQURBLElBQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBR0EsSUFBSUMsS0FBSyxHQUFHLEVBQVo7QUFDQSxJQUFNQyxHQUFHLEdBQUcsMEJBQVo7O0FBQ0EsSUFBTUMsTUFBTSxHQUFHQyxpQkFBS0MsWUFBTCxDQUFrQkgsR0FBbEIsQ0FBZixDLENBQXVDOzs7QUFDdkMsSUFBTUksRUFBRSxHQUFHLElBQUlDLGNBQUosQ0FBb0JKLE1BQXBCLENBQVgsQyxDQUF3Qzs7QUFFeENELEdBQUcsQ0FBQ00sR0FBSixDQUFRLE1BQVIsRUFBZ0IsSUFBaEI7QUFFQU4sR0FBRyxDQUFDTyxHQUFKLENBQVFDLDhCQUFlWCxJQUFJLENBQUNZLE9BQUwsQ0FBYUMsU0FBYixFQUF3QixRQUF4QixDQUFmLENBQVI7QUFFQU4sRUFBRSxDQUFDTyxFQUFILENBQU0sWUFBTixFQUFvQixVQUFDQyxNQUFELEVBQVk7QUFDNUJDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGdCQUFaLEVBQThCRixNQUFNLENBQUNHLEVBQXJDO0FBQ0FYLEVBQUFBLEVBQUUsQ0FBQ1ksSUFBSCxDQUFRLGtCQUFSLEVBQTRCakIsS0FBNUIsRUFGNEIsQ0FFUTs7QUFDcENhLEVBQUFBLE1BQU0sQ0FBQ0QsRUFBUCxDQUFVLGdCQUFWLEVBQTRCLFVBQUNNLE9BQUQsRUFBYTtBQUNyQyxRQUFNQyxJQUFJLG1DQUFPRCxPQUFQO0FBQWdCRixNQUFBQSxFQUFFLEVBQUU7QUFBcEIsTUFBVixDQURxQyxDQUNDOzs7QUFDdENoQixJQUFBQSxLQUFLLENBQUNvQixJQUFOLENBQVdELElBQVg7QUFDQWQsSUFBQUEsRUFBRSxDQUFDWSxJQUFILENBQVEsZ0JBQVIsRUFBMEJFLElBQTFCO0FBQ0gsR0FKRDtBQUtBTixFQUFBQSxNQUFNLENBQUNELEVBQVAsQ0FBVSxtQkFBVixFQUErQixVQUFDSSxFQUFELEVBQVE7QUFDbkNoQixJQUFBQSxLQUFLLEdBQUdBLEtBQUssQ0FBQ3FCLE1BQU4sQ0FBYSxVQUFBRixJQUFJO0FBQUEsYUFBSUEsSUFBSSxDQUFDSCxFQUFMLElBQVdBLEVBQWY7QUFBQSxLQUFqQixDQUFSO0FBQ0FYLElBQUFBLEVBQUUsQ0FBQ1ksSUFBSCxDQUFRLGtCQUFSLEVBQTRCakIsS0FBNUI7QUFDSCxHQUhEO0FBSUFhLEVBQUFBLE1BQU0sQ0FBQ0QsRUFBUCxDQUFVLG1CQUFWLEVBQStCLFVBQUNJLEVBQUQsRUFBUTtBQUNuQyxRQUFNRyxJQUFJLEdBQUduQixLQUFLLENBQUNzQixJQUFOLENBQVcsVUFBQUgsSUFBSTtBQUFBLGFBQUlBLElBQUksQ0FBQ0gsRUFBTCxJQUFXQSxFQUFmO0FBQUEsS0FBZixDQUFiO0FBQ0FILElBQUFBLE1BQU0sQ0FBQ0ksSUFBUCxDQUFZLG1CQUFaLEVBQWlDRSxJQUFqQztBQUNILEdBSEQ7QUFJQU4sRUFBQUEsTUFBTSxDQUFDRCxFQUFQLENBQVUsbUJBQVYsRUFBK0IsVUFBQ1csVUFBRCxFQUFnQjtBQUMzQ3ZCLElBQUFBLEtBQUssR0FBR0EsS0FBSyxDQUFDd0IsR0FBTixDQUFVLFVBQUNMLElBQUQsRUFBVTtBQUN4QixVQUFHQSxJQUFJLENBQUNILEVBQUwsS0FBWU8sVUFBVSxDQUFDUCxFQUExQixFQUE4QjtBQUMxQkcsUUFBQUEsSUFBSSxDQUFDTSxLQUFMLEdBQWFGLFVBQVUsQ0FBQ0UsS0FBeEI7QUFDQU4sUUFBQUEsSUFBSSxDQUFDTyxXQUFMLEdBQW1CSCxVQUFVLENBQUNHLFdBQTlCO0FBQ0g7O0FBQ0QsYUFBT1AsSUFBUDtBQUNILEtBTk8sQ0FBUjtBQU9BZCxJQUFBQSxFQUFFLENBQUNZLElBQUgsQ0FBUSxrQkFBUixFQUE0QmpCLEtBQTVCO0FBQ0MsR0FUTDtBQVVILENBMUJEO0FBNEJBRSxNQUFNLENBQUN5QixNQUFQLENBQWMxQixHQUFHLENBQUMyQixHQUFKLENBQVEsTUFBUixDQUFkLEVBQStCLFlBQU07QUFDakNkLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGtCQUFaLEVBQWdDZCxHQUFHLENBQUMyQixHQUFKLENBQVEsTUFBUixDQUFoQztBQUNILENBRkQiLCJzb3VyY2VSb290IjoiL2hvbWUvamZlcm5hbmRvL3BlcnNvbmFsUHJvamVjdHMvd2Vic29ja2V0cy1ub2RlanMtY3J1ZC9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBodHRwLCB7IFNlcnZlciB9IGZyb20gXCJodHRwXCI7XG5pbXBvcnQge1NlcnZlciBhcyBXZWJTb2NrZXRTZXJ2ZXJ9IGZyb20gXCJzb2NrZXQuaW9cIjtcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcbmltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tIFwidXVpZFwiXG5cbmxldCBub3RlcyA9IFtdO1xuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY29uc3Qgc2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoYXBwKTsgLy9DcmVhbW9zIHVuIHNlcnZpZG9yIHkgbGUgcGFzYW1vcyBsYXMgcHJvcGllZGFkZXMgZGUgbGEgYXBwIGRlIGV4cHJlc3MuXG5jb25zdCBpbyA9IG5ldyBXZWJTb2NrZXRTZXJ2ZXIoc2VydmVyKTsgLy9DcmVhbW9zIG51ZXN0cm8gd2Vic29ja2V0IHkgbGUgcGFzYW1vcyBlbCBzZXJ2aWRvciBpbmljaWFsaXphZG8uXG5cbmFwcC5zZXQoXCJwb3J0XCIsIDMwMDApO1xuXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwicHVibGljXCIpKSlcblxuaW8ub24oXCJjb25uZWN0aW9uXCIsIChzb2NrZXQpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIk5ldyBDb25uZWN0aW9uXCIsIHNvY2tldC5pZCk7XG4gICAgaW8uZW1pdChcInNlcnZlcjpsb2FkTm90ZXNcIiwgbm90ZXMpOyAvL0VudsOtbyBsYXMgbm90YXMgeWEgZ3VhcmRhZGFzIHBhcmEgcXVlIHNlIG11ZXN0cmVuIGVuIHBhbnRhbGxhLlxuICAgIHNvY2tldC5vbihcImNsaWVudDpuZXdub3RlXCIsIChuZXdOb3RlKSA9PiB7XG4gICAgICAgIGNvbnN0IG5vdGUgPSB7Li4ubmV3Tm90ZSwgaWQ6IHV1aWQoKX0gLy8uLm5ld05vcnRlIHNpZ25pZmljYSBxdWUgcXVpZXJvIHRvZG9zIGxvcyBkYXRvcyBkZW50cm8gZGVsIGFycmF5XG4gICAgICAgIG5vdGVzLnB1c2gobm90ZSk7XG4gICAgICAgIGlvLmVtaXQoXCJzZXJ2ZXI6bmV3bm90ZVwiLCBub3RlKTtcbiAgICB9KVxuICAgIHNvY2tldC5vbihcImNsaWVudDpkZWxldGVOb3RlXCIsIChpZCkgPT4ge1xuICAgICAgICBub3RlcyA9IG5vdGVzLmZpbHRlcihub3RlID0+IG5vdGUuaWQgIT0gaWQpO1xuICAgICAgICBpby5lbWl0KFwic2VydmVyOmxvYWROb3Rlc1wiLCBub3Rlcyk7XG4gICAgfSlcbiAgICBzb2NrZXQub24oXCJjbGllbnQ6dXBkYXRlTm90ZVwiLCAoaWQpID0+IHtcbiAgICAgICAgY29uc3Qgbm90ZSA9IG5vdGVzLmZpbmQobm90ZSA9PiBub3RlLmlkID09IGlkKTtcbiAgICAgICAgc29ja2V0LmVtaXQoXCJzZXJ2ZXI6dXBkYXRlTm90ZVwiLCBub3RlKTtcbiAgICB9KVxuICAgIHNvY2tldC5vbihcImNsaWVudDpjaGFuZ2VOb3RlXCIsICh1cGRhdGVOb3RlKSA9PiB7XG4gICAgICAgIG5vdGVzID0gbm90ZXMubWFwKChub3RlKSA9PiB7XG4gICAgICAgICAgICBpZihub3RlLmlkID09PSB1cGRhdGVOb3RlLmlkKSB7XG4gICAgICAgICAgICAgICAgbm90ZS50aXRsZSA9IHVwZGF0ZU5vdGUudGl0bGU7XG4gICAgICAgICAgICAgICAgbm90ZS5kZXNjcmlwdGlvbiA9IHVwZGF0ZU5vdGUuZGVzY3JpcHRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbm90ZTtcbiAgICAgICAgfSlcbiAgICAgICAgaW8uZW1pdChcInNlcnZlcjpsb2FkTm90ZXNcIiwgbm90ZXMpO1xuICAgICAgICB9KVxufSlcblxuc2VydmVyLmxpc3RlbihhcHAuZ2V0KFwicG9ydFwiKSwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiU2VydmVyIG9uIHBvcnQ6IFwiLCBhcHAuZ2V0KFwicG9ydFwiKSlcbn0pIl19","map":{"version":3,"sources":["index.js"],"names":["path","require","notes","app","server","http","createServer","io","WebSocketServer","set","use","express","resolve","__dirname","on","socket","console","log","id","emit","newNote","note","push","filter","find","updateNote","map","title","description","listen","get"],"mappings":";;;;AAAA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;AADA,IAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AAGA,IAAIC,KAAK,GAAG,EAAZ;AACA,IAAMC,GAAG,GAAG,0BAAZ;;AACA,IAAMC,MAAM,GAAGC,iBAAKC,YAAL,CAAkBH,GAAlB,CAAf,C,CAAuC;;;AACvC,IAAMI,EAAE,GAAG,IAAIC,cAAJ,CAAoBJ,MAApB,CAAX,C,CAAwC;;AAExCD,GAAG,CAACM,GAAJ,CAAQ,MAAR,EAAgB,IAAhB;AAEAN,GAAG,CAACO,GAAJ,CAAQC,8BAAeX,IAAI,CAACY,OAAL,CAAaC,SAAb,EAAwB,QAAxB,CAAf,CAAR;AAEAN,EAAE,CAACO,EAAH,CAAM,YAAN,EAAoB,UAACC,MAAD,EAAY;AAC5BC,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BF,MAAM,CAACG,EAArC;AACAX,EAAAA,EAAE,CAACY,IAAH,CAAQ,kBAAR,EAA4BjB,KAA5B,EAF4B,CAEQ;;AACpCa,EAAAA,MAAM,CAACD,EAAP,CAAU,gBAAV,EAA4B,UAACM,OAAD,EAAa;AACrC,QAAMC,IAAI,mCAAOD,OAAP;AAAgBF,MAAAA,EAAE,EAAE;AAApB,MAAV,CADqC,CACC;;;AACtChB,IAAAA,KAAK,CAACoB,IAAN,CAAWD,IAAX;AACAd,IAAAA,EAAE,CAACY,IAAH,CAAQ,gBAAR,EAA0BE,IAA1B;AACH,GAJD;AAKAN,EAAAA,MAAM,CAACD,EAAP,CAAU,mBAAV,EAA+B,UAACI,EAAD,EAAQ;AACnChB,IAAAA,KAAK,GAAGA,KAAK,CAACqB,MAAN,CAAa,UAAAF,IAAI;AAAA,aAAIA,IAAI,CAACH,EAAL,IAAWA,EAAf;AAAA,KAAjB,CAAR;AACAX,IAAAA,EAAE,CAACY,IAAH,CAAQ,kBAAR,EAA4BjB,KAA5B;AACH,GAHD;AAIAa,EAAAA,MAAM,CAACD,EAAP,CAAU,mBAAV,EAA+B,UAACI,EAAD,EAAQ;AACnC,QAAMG,IAAI,GAAGnB,KAAK,CAACsB,IAAN,CAAW,UAAAH,IAAI;AAAA,aAAIA,IAAI,CAACH,EAAL,IAAWA,EAAf;AAAA,KAAf,CAAb;AACAH,IAAAA,MAAM,CAACI,IAAP,CAAY,mBAAZ,EAAiCE,IAAjC;AACH,GAHD;AAIAN,EAAAA,MAAM,CAACD,EAAP,CAAU,mBAAV,EAA+B,UAACW,UAAD,EAAgB;AAC3CvB,IAAAA,KAAK,GAAGA,KAAK,CAACwB,GAAN,CAAU,UAACL,IAAD,EAAU;AACxB,UAAGA,IAAI,CAACH,EAAL,KAAYO,UAAU,CAACP,EAA1B,EAA8B;AAC1BG,QAAAA,IAAI,CAACM,KAAL,GAAaF,UAAU,CAACE,KAAxB;AACAN,QAAAA,IAAI,CAACO,WAAL,GAAmBH,UAAU,CAACG,WAA9B;AACH;;AACD,aAAOP,IAAP;AACH,KANO,CAAR;AAOAd,IAAAA,EAAE,CAACY,IAAH,CAAQ,kBAAR,EAA4BjB,KAA5B;AACC,GATL;AAUH,CA1BD;AA4BAE,MAAM,CAACyB,MAAP,CAAc1B,GAAG,CAAC2B,GAAJ,CAAQ,MAAR,CAAd,EAA+B,YAAM;AACjCd,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCd,GAAG,CAAC2B,GAAJ,CAAQ,MAAR,CAAhC;AACH,CAFD","sourceRoot":"/home/jfernando/personalProjects/websockets-nodejs-crud/src/","sourcesContent":["import express from \"express\";\nimport http, { Server } from \"http\";\nimport {Server as WebSocketServer} from \"socket.io\";\nconst path = require(\"path\");\nimport { v4 as uuid } from \"uuid\"\n\nlet notes = [];\nconst app = express();\nconst server = http.createServer(app); //Creamos un servidor y le pasamos las propiedades de la app de express.\nconst io = new WebSocketServer(server); //Creamos nuestro websocket y le pasamos el servidor inicializado.\n\napp.set(\"port\", 3000);\n\napp.use(express.static(path.resolve(__dirname, \"public\")))\n\nio.on(\"connection\", (socket) => {\n    console.log(\"New Connection\", socket.id);\n    io.emit(\"server:loadNotes\", notes); //Envío las notas ya guardadas para que se muestren en pantalla.\n    socket.on(\"client:newnote\", (newNote) => {\n        const note = {...newNote, id: uuid()} //..newNorte significa que quiero todos los datos dentro del array\n        notes.push(note);\n        io.emit(\"server:newnote\", note);\n    })\n    socket.on(\"client:deleteNote\", (id) => {\n        notes = notes.filter(note => note.id != id);\n        io.emit(\"server:loadNotes\", notes);\n    })\n    socket.on(\"client:updateNote\", (id) => {\n        const note = notes.find(note => note.id == id);\n        socket.emit(\"server:updateNote\", note);\n    })\n    socket.on(\"client:changeNote\", (updateNote) => {\n        notes = notes.map((note) => {\n            if(note.id === updateNote.id) {\n                note.title = updateNote.title;\n                note.description = updateNote.description;\n            }\n            return note;\n        })\n        io.emit(\"server:loadNotes\", notes);\n        })\n})\n\nserver.listen(app.get(\"port\"), () => {\n    console.log(\"Server on port: \", app.get(\"port\"))\n})"]}},"mtime":1650907228479}}